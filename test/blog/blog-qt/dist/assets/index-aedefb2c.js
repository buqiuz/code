import{_ as k}from"./index-f680a34c.js";import{_ as x}from"./index-f11189a3.js";import{g as C}from"./index-0613b508.js";import{d as T,j as g,k as w,ab as L,o as c,a as r,b as h,w as v,e as o,F as _,A as y,c as A,t as u,a1 as E}from"./index-35141ee5.js";const $={class:"timeline"},S={class:"year"},q=["onClick","data-text"],B={class:"content"},I=["src"],D={class:"content-title"},F={class:"content-desc"},H=T({__name:"index",setup(M){function b(s){return s=s.map(e=>(e.articleContent=e.articleContent.replace(/[*#>`~\-\\[\]()\s]|(\n\n)/g,""),e.articleContent=e.articleContent.substring(0,60)+"...",e.createTime=e.createTime.substring(0,10),e)),A(()=>s.reduce((e,n)=>{const t=new Date(n.createTime).getFullYear();return e[t]||(e[t]=[]),e[t].push(n),e},{})).value}const m=g(null),f=g([]);return w(async()=>{await C().then(s=>{f.value=b(s.data)}),await L(()=>{const s=m.value,l=s.querySelectorAll(".item"),e=Array.from(l);e[0].classList.add("item--active"),s.style.backgroundImage=`url(${e[0].querySelector(".img").src})`,window.addEventListener("scroll",()=>{const n=window.pageYOffset;e.forEach((t,i)=>{const a=t.offsetTop,p=t.offsetHeight+t.offsetTop;i===e.length-2&&n>a+t.offsetHeight/2?(e.forEach(d=>d.classList.remove("item--active")),s.style.backgroundImage=`url(${e[e.length-1].querySelector(".img").src})`,e[e.length-1].classList.add("item--active")):n<=p-10&&n>=a&&(s.style.backgroundImage=`url(${t.querySelector(".img").src})`,e.forEach(d=>d.classList.remove("item--active")),t.classList.add("item--active"))})})})}),(s,l)=>{const e=x,n=k;return c(),r("div",null,[h(n,{"only-father-container":""},{banner:v(()=>[h(e,{title:"时间轴",subtitle:"TimeLine"})]),content:v(()=>[o("div",{class:"shell",ref_key:"shellRef",ref:m},[o("div",$,[(c(!0),r(_,null,y(f.value,(t,i)=>(c(),r(_,{key:t.id},[o("div",S,"--"+u(i)+"--",1),(c(!0),r(_,null,y(t,a=>(c(),r("div",{class:"item",onClick:p=>s.$router.push(`/article/${a.id}`),"data-text":a.createTime},[o("div",B,[o("img",{class:"img",src:a.articleCover},null,8,I),o("h2",D,u(a.articleTitle),1),o("p",F,u(a.articleContent),1)])],8,q))),256))],64))),128))])],512)]),_:1})])}}});const j=E(H,[["__scopeId","data-v-b4d0e128"]]);export{j as default};
