import{m as xe,s as we,K as Ie,bl as ie,ba as $e,d as O,y as Te,ar as J,bm as Ae,bn as ce,j as $,c as Z,bo as Se,l as ue,k as _e,bp as Ne,bq as Be,D as Ve,o as v,a as p,e,X as Re,B as re,u as c,af as W,_ as Me,U as De,a4 as Fe,a5 as y,b as o,a7 as ee,a8 as te,a9 as oe,a1 as le,w as u,ao as Le,h as R,aw as Ue,br as Oe,ae as ze,av as He,a3 as w,bs as Pe,ap as b,t as n,F as U,A as q,a6 as I,f as je,i as qe,bh as We}from"./index-35141ee5.js";import{t as Ye,a as Ge,_ as Ke}from"./index-8d9b895d.js";import{_ as Xe}from"./index-f680a34c.js";import{_ as Je,b as Qe,c as Ze,d as et}from"./index-25b56d42.js";import{a as tt,i as ot,d as lt,b as st,c as nt,u as at,_ as it}from"./index-78500ea7.js";import{E as ct}from"./el-link-c0fa233f.js";import{E as rt}from"./el-image-viewer-e3b5ca0c.js";import{E as dt}from"./el-divider-1c12c4b1.js";import{_ as ut}from"./index-fe347421.js";import{M as de}from"./index-ddedae1d.js";/* empty css                */import{a as _t,b as vt}from"./index-0613b508.js";import{M as ve}from"./MdCatalog-e8d883b7.js";import{E as mt}from"./el-drawer-7bd1d3f5.js";import"./el-overlay-9c23b2ca.js";import{g as pt}from"./scroll-fce495f9.js";import"./index-24fa3eb6.js";import"./index-23ba9dbb.js";import"./vnode-a9496789.js";import"./aria-bc8e8b0f.js";import"./index-53285ed5.js";import"./el-avatar-948f01f8.js";import"./el-scrollbar-d2c305e3.js";import"./el-tag-d18553b0.js";import"./index-3a866b64.js";import"./el-dialog-c944c34a.js";import"./castArray-824eebc4.js";const ft=xe({zIndex:{type:we([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),ht={scroll:({scrollTop:r,fixed:C})=>Ie(r)&&ie(C),[$e]:r=>ie(r)},me="ElAffix",gt=O({name:me}),yt=O({...gt,props:ft,emits:ht,setup(r,{expose:C,emit:k}){const a=r,T=Te("affix"),h=J(),t=J(),m=J(),{height:N}=Ae(),{height:A,width:B,top:D,bottom:z,update:M}=ce(t,{windowScroll:!1}),g=ce(h),_=$(!1),F=$(0),V=$(0),Y=Z(()=>({height:_.value?`${A.value}px`:"",width:_.value?`${B.value}px`:""})),G=Z(()=>{if(!_.value)return{};const i=a.offset?Se(a.offset):0;return{height:`${A.value}px`,width:`${B.value}px`,top:a.position==="top"?i:"",bottom:a.position==="bottom"?i:"",transform:V.value?`translateY(${V.value}px)`:"",zIndex:a.zIndex}}),L=()=>{if(m.value)if(F.value=m.value instanceof Window?document.documentElement.scrollTop:m.value.scrollTop||0,a.position==="top")if(a.target){const i=g.bottom.value-a.offset-A.value;_.value=a.offset>D.value&&g.bottom.value>0,V.value=i<0?i:0}else _.value=a.offset>D.value;else if(a.target){const i=N.value-g.top.value-a.offset-A.value;_.value=N.value-a.offset<z.value&&N.value>g.top.value,V.value=i<0?-i:0}else _.value=N.value-a.offset<z.value},K=()=>{M(),k("scroll",{scrollTop:F.value,fixed:_.value})};return ue(_,i=>k("change",i)),_e(()=>{var i;a.target?(h.value=(i=document.querySelector(a.target))!=null?i:void 0,h.value||Ne(me,`Target does not exist: ${a.target}`)):h.value=document.documentElement,m.value=pt(t.value,!0),M()}),Be(m,"scroll",K),Ve(L),C({update:L,updateRoot:M}),(i,se)=>(v(),p("div",{ref_key:"root",ref:t,class:re(c(T).b()),style:W(c(Y))},[e("div",{class:re({[c(T).m("fixed")]:_.value}),style:W(c(G))},[Re(i.$slots,"default")],6)],6))}});var Et=Me(yt,[["__file","affix.vue"]]);const Ct=De(Et);const bt=r=>(te("data-v-6e03e968"),r=r(),oe(),r),kt={class:"card px-[10px]"},xt={class:"title"},wt={class:"title_text"},It=bt(()=>e("span",{style:{"margin-left":"10px"}},"目录",-1)),$t={class:"min-h-[16em] max-h-[40em] overflow-y-auto"},Tt="preview-only",At=O({__name:"index",setup(r){const C=document.documentElement;return(k,a)=>{const T=ee,h=Fe("slide-in");return y((v(),p("div",kt,[e("div",xt,[e("div",wt,[o(T,{class:"scale",name:"directory",width:"30",height:"30"}),It])]),e("div",$t,[o(c(ve),{editorId:Tt,scrollElement:c(C)},null,8,["scrollElement"])])])),[[h]])}}});const St=le(At,[["__scopeId","data-v-6e03e968"]]),Nt=r=>(te("data-v-f7b68fe9"),r=r(),oe(),r),Bt={key:0},Vt=Nt(()=>e("span",{style:{"font-size":"1.2rem"}},"目录",-1)),Rt={class:"move_catalog"},Mt=O({__name:"index",props:{id:{},scrollElement:{},isShowMoveCatalog:{type:Boolean}},emits:["update:isShowMoveCatalog"],setup(r,{emit:C}){const k=r,a=C,T=Z(()=>k.isShowMoveCatalog),h=()=>{a("update:isShowMoveCatalog",!1)};return(t,m)=>{const N=Ue,A=mt;return t.scrollElement?(v(),p("div",Bt,[o(A,{modelValue:c(T),"onUpdate:modelValue":m[1]||(m[1]=B=>Le(T)?T.value=B:null),"with-header":!0,size:"60%",direction:"rtl","show-close":!1,"before-close":h},{header:u(()=>[Vt,o(N,{icon:c(Oe),style:{background:"none","font-size":"1.5rem",width:"30px",border:"none"},onClick:m[0]||(m[0]=B=>h())},null,8,["icon"])]),default:u(()=>[e("div",Rt,[o(c(ve),{editorId:k.id,scrollElement:k.scrollElement},null,8,["editorId","scrollElement"])])]),_:1},8,["modelValue"])])):R("",!0)}}});const Dt=le(Mt,[["__scopeId","data-v-f7b68fe9"]]),E=r=>(te("data-v-aa81c739"),r=r(),oe(),r),Ft=E(()=>e("div",{class:"progress"},null,-1)),Lt={class:"p-1"},Ut={class:"head_title_text"},Ot={class:"classify"},zt={class:"tag"},Ht={class:"title"},Pt={class:"statistics"},jt={class:"statistics"},qt={class:"time"},Wt={style:{display:"flex","align-items":"center"}},Yt=E(()=>e("span",{style:{"margin-left":"0.5em"}},"声明",-1)),Gt={class:"copyright"},Kt={class:"author"},Xt={class:"link"},Jt=E(()=>e("strong",null,"本文链接： ",-1)),Qt=["href"],Zt={class:"license"},eo=E(()=>e("strong",null,"版权声明： ",-1)),to=E(()=>e("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"},"CC BY-NC-SA 4.0",-1)),oo={style:{display:"flex","justify-content":"space-between"}},lo={class:"tag"},so=["onClick"],no={class:"like"},ao=E(()=>e("span",null,"分享",-1)),io={class:"tag",style:{display:"flex","justify-content":"left"}},co={class:"tipping"},ro={class:"qrCode"},uo=E(()=>e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1)),_o={class:"goOn"},vo={key:0},mo={key:0},po={class:"sticky_layout"},fo={class:"mt-[2.5em]"},ho={key:0},go={class:"bg-white"},yo={class:"sm:px-1 md:px-[5rem] lg:px-[10rem] xl:px-[15rem] py-3",style:{transition:"all .5s ease"}},Eo={class:"head_title_text"},Co={class:"classify"},bo={class:"tag"},ko={class:"title"},xo={class:"statistics"},wo={class:"statistics"},Io={class:"time"},$o={style:{display:"flex","align-items":"center"}},To=E(()=>e("span",{style:{"margin-left":"0.5em"}},"声明",-1)),Ao={class:"copyright"},So={class:"author"},No={class:"link"},Bo=E(()=>e("strong",null,"本文链接： ",-1)),Vo=["href"],Ro={class:"license"},Mo=E(()=>e("strong",null,"版权声明： ",-1)),Do=E(()=>e("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"},"CC BY-NC-SA 4.0",-1)),Fo={style:{display:"flex","justify-content":"space-between"}},Lo={class:"tag"},Uo=["onClick"],Oo={class:"like"},zo=E(()=>e("span",null,"分享",-1)),Ho={class:"tag",style:{display:"flex","justify-content":"left"}},Po={class:"tipping"},jo={class:"qrCode"},qo=E(()=>e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1)),Wo={class:"goOn"},Yo={key:0},Go={key:0},Q="preview-only",Ko=O({__name:"index",setup(r){const C={VITE_APP_BASE_API:"/api",VITE_SERVE:"http://8.137.91.234:8088",VITE_FRONTEND_URL:"http://buqiu.icu",VITE_MUSIC_BASE_API:"/wapi",VITE_MUSIC_SERVE:"http://8.137.91.234:3000",VITE_MUSIC_FRONTEND_URL:"http://8.137.91.234:3344",VITE_YIYAN_API:"https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-speed-128k?access_token=24.9e262076d22b35e7e996ce2bd79c0f3b.2592000.1724320525.282335-97327216",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k=ze(),a=He(),T=document.documentElement,h=$(!1),t=$({articleCover:"",articleTitle:"",articleContent:void 0,categoryName:"",categoryId:"",tags:[],visitCount:0,commentCount:0,likeCount:0,favoriteCount:0,createTime:"",updateTime:"",userId:0,id:"0"}),m=qe(),N=$(!1),A=$(0);ue(()=>m.params.id,()=>{B()}),_e(async()=>{await B()});async function B(){_t(m.params.id).then(s=>{if(!s.data){w.warning({message:"文章不存在"}),Pe.push({path:"/"});return}m.params.id&&vt(m.params.id),s.data.createTime=s.data.createTime.split(" ")[0],s.data.updateTime=s.data.updateTime.split(" ")[0],t.value=s.data,N.value=!0,Y(),G()})}function D(s){const l=s.replace(/<[^>]+>/g,"").replace(/[\r\n]/g,"").replace(/[ ]/g,"").replace(/[\s+\.\!\/_,$%^*(+\"\']+|[+——！，。？、~@#￥%……&*（）]+/g,"");A.value=z(l.length)}function z(s){if(s<=1e3)return s;{let l=s/1e3;return l=Number(l.toFixed(1)),l+"k"}}const M=async()=>{try{const s=`欢迎访问博客文章：${t.value.articleTitle} 
通往地址：http://8.137.91.234/blog${m.path}`;await navigator.clipboard.writeText(s),w.success("已复制分享链接")}catch{w.error("复制失败，请类型网站管理员")}},g=$(!1),_=$(!1),F=s=>{g.value?lt(1,t.value.id).then(l=>{l.code===200?(s.favoriteCount-=1,g.value=!1,w.info("取消收藏")):w.error(l.msg)}):st(1,t.value.id).then(l=>{l.code===200?(s.favoriteCount+=1,g.value=!0,w.success("收藏成功")):w.error(l.msg)})};function V(s){_.value?nt(1,t.value.id).then(l=>{l.code===200?(s.likeCount-=1,_.value=!1,w.info("我会继续努力的")):w.error(l.msg)}):at(1,t.value.id).then(l=>{l.code===200?(s.likeCount+=1,_.value=!0,w.success("感谢你的认可")):w.error(l.msg)})}function Y(){tt(1,t.value.id).then(s=>{g.value=s.data===!0})}function G(){ot(1,t.value.id).then(s=>{_.value=s.code===200})}window.addEventListener("scroll",Ye(()=>{window.requestAnimationFrame(K)},40));const L=$("0%");function K(){let s=document.documentElement.scrollHeight||document.body.scrollHeight,l=document.documentElement.clientHeight||document.body.clientHeight,H=s-l,f=document.documentElement.scrollTop||document.body.scrollTop,P=document.querySelector(".progress");P.style.width=f/H*100+"%",L.value=Math.floor(f/H*100)+"%"}const i=$(!1);function se(){i.value=!i.value}return(s,l)=>{var ae;const H=ut,f=ee,P=dt,S=ee,ne=rt,X=We,j=ct,pe=it,fe=Je,he=Qe,ge=Ze,ye=et,Ee=Ge,Ce=Xe,be=Ke,ke=Ct;return v(),p(U,null,[y(e("div",null,[o(Ce,{"is-side-bar":""},{header:u(()=>[o(H)]),content:u(()=>{var d;return[Ft,e("div",Lt,[e("div",{class:"head_title",style:W(`background-image: url('${t.value.articleCover}')`)},[e("div",Ut,[e("div",Ot,[e("div",null,n(t.value.categoryName),1),(v(!0),p(U,null,q(t.value.tags,x=>(v(),p("div",zt,"# "+n(x.tagName),1))),256))]),e("div",Ht,n(t.value.articleTitle),1),e("div",Pt,[e("div",null,"字数统计:"+n(A.value),1)]),e("div",jt,[e("div",null,"访问量:"+n(t.value.visitCount),1),e("div",null,"评论数:"+n(t.value.commentCount),1),e("div",null,"点赞量:"+n(t.value.likeCount),1),e("div",null,"收藏量:"+n(t.value.favoriteCount),1)]),e("div",qt,[e("div",null,"发布："+n(t.value.createTime),1),e("div",null,"更新："+n(t.value.updateTime),1)])])],4),e("div",null,[e("div",null,[o(c(de),{editorId:Q,theme:c(a),modelValue:t.value.articleContent,"on-html-changed":D},null,8,["theme","modelValue"])]),o(P,{"border-style":"dashed","content-position":"left"},{default:u(()=>[e("div",Wt,[o(f,{name:"author_statement"}),Yt])]),_:1}),e("div",Gt,[e("div",Kt,[o(f,{name:"article_author"}),e("strong",null,"本文作者： "+n((d=c(k).webInfo)==null?void 0:d.webmasterName),1)]),e("div",Xt,[o(f,{name:"author_link"}),Jt,e("a",{href:c(C).VITE_FRONTEND_URL+s.$route.path},n(c(C).VITE_FRONTEND_URL+s.$route.path),9,Qt)]),e("div",Zt,[o(f,{name:"author_copyright"}),eo,I("本站所有文章除特别声明外，均采用 "),to,I(" 许可协议。转载请注明文章出处！ ")])])]),e("div",oo,[e("div",lo,[(v(!0),p(U,null,q(t.value.tags,x=>(v(),p("div",{key:x.id,onClick:Xo=>s.$router.push(`/tags/${x.id}`)},"# "+n(x.tagName),9,so))),128))]),e("div",no,[e("div",{onClick:l[0]||(l[0]=x=>V(t.value))},[y(o(S,{name:"like"},null,512),[[b,!_.value]]),y(o(S,{name:"like-selected"},null,512),[[b,_.value]]),e("span",null,n(t.value.likeCount),1)]),e("div",{onClick:l[1]||(l[1]=x=>F(t.value))},[y(o(S,{name:"collection"},null,512),[[b,!g.value]]),y(o(S,{name:"collection-selected"},null,512),[[b,g.value]]),e("span",null,n(t.value.favoriteCount),1)]),e("div",{onClick:M},[o(S,{name:"share"}),ao])])]),e("div",null,[e("div",io,[e("div",{onClick:l[2]||(l[2]=x=>s.$router.push(`/category/${t.value.categoryId}`))},n(t.value.categoryName),1)])]),e("div",co,[o(X,{class:"box-item",effect:"light",placement:"top"},{content:u(()=>[e("div",ro,[e("div",null,[I(" 微信 "),o(ne,{src:"http://8.137.91.234:9000/blog/pay/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg"})])])]),default:u(()=>[e("div",null,[o(f,{name:"gift"}),uo])]),_:1})]),e("div",_o,[e("div",null,[t.value.preArticleId>0?(v(),p("div",vo,[o(j,{onClick:l[3]||(l[3]=x=>s.$router.push(`/article/${t.value.preArticleId}`))},{default:u(()=>[I(" 上一篇："+n(t.value.preArticleTitle),1)]),_:1})])):R("",!0)]),e("div",null,[t.value.nextArticleId>0?(v(),p("div",mo,[o(j,{onClick:l[4]||(l[4]=x=>s.$router.push(`/article/${t.value.nextArticleId}`))},{default:u(()=>[I(" 下一篇："+n(t.value.nextArticleTitle),1)]),_:1})])):R("",!0)])]),N.value?(v(),je(pe,{key:0,type:1,"like-type":2,"author-id":t.value.userId,"type-id":t.value.id},null,8,["author-id","type-id"])):R("",!0)])]}),information:u(()=>[o(fe),o(he,{title:"公告",prefixIcon:"announcement","suffix-icon":"jt_y",isDithering:!0,isArrow:!0},{default:u(()=>{var d;return[e("p",null,n((d=c(k).webInfo)==null?void 0:d.sidebarAnnouncement),1)]}),_:1}),o(ge),e("div",po,[e("div",fo,[o(St)]),t.value.categoryId!==""?(v(),p("div",ho,[o(ye,{categoryId:t.value.categoryId.toString(),articleId:c(m).params.id,title:"相关推荐","prefix-icon":"query_tasks"},null,8,["categoryId","articleId"])])):R("",!0)])]),footer:u(()=>[o(Ee)]),_:1})],512),[[b,!i.value]]),y(e("div",go,[e("div",{onClick:l[5]||(l[5]=d=>i.value=!1),class:"z-10 w-[50px] h-[50px] bg-gray-200 hover:bg-gray-300 fixed top-[2em] right-[1em] lg:right-[5em] rounded flex items-center justify-center duration-300 cursor-pointer"},[o(f,{name:"exit_icon",style:{width:"25px",height:"25px"}})]),e("div",yo,[e("div",{class:"head_title",style:W(`background-image: url('${t.value.articleCover}')`)},[e("div",Eo,[e("div",Co,[e("div",null,n(t.value.categoryName),1),(v(!0),p(U,null,q(t.value.tags,d=>(v(),p("div",bo,"# "+n(d.tagName),1))),256))]),e("div",ko,n(t.value.articleTitle),1),e("div",xo,[e("div",null,"字数统计:"+n(A.value),1)]),e("div",wo,[e("div",null,"访问量:"+n(t.value.visitCount),1),e("div",null,"评论数:"+n(t.value.commentCount),1),e("div",null,"点赞量:"+n(t.value.likeCount),1),e("div",null,"收藏量:"+n(t.value.favoriteCount),1)]),e("div",Io,[e("div",null,"发布："+n(t.value.createTime),1),e("div",null,"更新："+n(t.value.updateTime),1)])])],4),e("div",null,[e("div",null,[o(c(de),{editorId:Q,theme:c(a),modelValue:t.value.articleContent,"on-html-changed":D},null,8,["theme","modelValue"])]),o(P,{"border-style":"dashed","content-position":"left"},{default:u(()=>[e("div",$o,[o(f,{name:"author_statement"}),To])]),_:1}),e("div",Ao,[e("div",So,[o(f,{name:"article_author"}),e("strong",null,"本文作者： "+n((ae=c(k).webInfo)==null?void 0:ae.webmasterName),1)]),e("div",No,[o(f,{name:"author_link"}),Bo,e("a",{href:c(C).VITE_FRONTEND_URL+s.$route.path},n(c(C).VITE_FRONTEND_URL+s.$route.path),9,Vo)]),e("div",Ro,[o(f,{name:"author_copyright"}),Mo,I("本站所有文章除特别声明外，均采用 "),Do,I(" 许可协议。转载请注明文章出处！ ")])])]),e("div",Fo,[e("div",Lo,[(v(!0),p(U,null,q(t.value.tags,d=>(v(),p("div",{key:d.id,onClick:x=>s.$router.push(`/tags/${d.id}`)},"# "+n(d.tagName),9,Uo))),128))]),e("div",Oo,[e("div",{onClick:l[6]||(l[6]=d=>V(t.value))},[y(o(S,{name:"like"},null,512),[[b,!_.value]]),y(o(S,{name:"like-selected"},null,512),[[b,_.value]]),e("span",null,n(t.value.likeCount),1)]),e("div",{onClick:l[7]||(l[7]=d=>F(t.value))},[y(o(S,{name:"collection"},null,512),[[b,!g.value]]),y(o(S,{name:"collection-selected"},null,512),[[b,g.value]]),e("span",null,n(t.value.favoriteCount),1)]),e("div",{onClick:M},[o(S,{name:"share"}),zo])])]),e("div",null,[e("div",Ho,[e("div",{onClick:l[8]||(l[8]=d=>s.$router.push(`/category/${t.value.categoryId}`))},n(t.value.categoryName),1)])]),e("div",Po,[o(X,{class:"box-item",effect:"light",placement:"top"},{content:u(()=>[e("div",jo,[e("div",null,[I(" 微信 "),o(ne,{src:"http://8.137.91.234:9000/blog/pay/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg"})])])]),default:u(()=>[e("div",null,[o(f,{name:"gift"}),qo])]),_:1})]),e("div",Wo,[e("div",null,[t.value.preArticleId>0?(v(),p("div",Yo,[o(j,{onClick:l[9]||(l[9]=d=>s.$router.push(`/article/${t.value.preArticleId}`))},{default:u(()=>[I(" 上一篇："+n(t.value.preArticleTitle),1)]),_:1})])):R("",!0)]),e("div",null,[t.value.nextArticleId>0?(v(),p("div",Go,[o(j,{onClick:l[10]||(l[10]=d=>s.$router.push(`/article/${t.value.nextArticleId}`))},{default:u(()=>[I(" 下一篇："+n(t.value.nextArticleTitle),1)]),_:1})])):R("",!0)])])])],512),[[b,i.value]]),o(Dt,{id:Q,"scroll-element":c(T),"is-show-move-catalog":h.value,"onUpdate:isShowMoveCatalog":l[11]||(l[11]=d=>h.value=d)},null,8,["scroll-element","is-show-move-catalog"]),y(o(be,{"to-top":"","scroll-percentage":"","reading-mode":"","to-comment":"",onReadingMode:se},{scroll_percentage:u(()=>[I(n(L.value),1)]),_:1},512),[[b,!i.value]]),y(e("div",null,[o(ke,{position:"bottom",offset:200},{default:u(()=>[o(X,{effect:"light",content:"显示目录",placement:"right"},{default:u(()=>[e("div",{class:"move_catalog_btn",onClick:l[12]||(l[12]=d=>h.value=!0)},[o(f,{name:"directory",class:"move_catalog_svg",width:"30",height:"30"})])]),_:1})]),_:1})],512),[[b,!i.value]])],64)}}});const xl=le(Ko,[["__scopeId","data-v-aa81c739"]]);export{xl as default};
