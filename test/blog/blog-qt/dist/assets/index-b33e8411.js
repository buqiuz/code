import{d as U,j as x,ah as $,c as k,o as I,a as B,e as d,b as e,w as a,u as m,a6 as _,t as Z,bZ as A,a3 as i,b_ as R,E as q,C as N,aD as D,aw as F,bW as P,bX as T,bY as v,b$ as j,c0 as L}from"./index-35141ee5.js";import{E as M}from"./el-link-c0fa233f.js";import{E as S,a as W}from"./el-form-item-742feb24.js";import{s as X}from"./index-a331d412.js";import"./castArray-824eebc4.js";const Y={style:{"text-align":"center",margin:"0 20px"}},G=d("div",{style:{"margin-top":"100px"}},[d("div",{style:{"font-size":"25px","font-weight":"bold"}},"注册新用户"),d("div",{style:{"font-size":"14px",color:"grey","margin-top":"1rem"}},"欢迎注册我们的学习平台，请在下方填写相关信息")],-1),H={style:{"margin-top":"50px"}},J={style:{"margin-top":"80px"}},K={style:{"margin-top":"20px"}},O=d("span",{style:{"font-size":"14px","line-height":"15px",color:"grey"}},"已有账号?",-1),ne=U({__name:"index",setup(Q){const n=x(0),f=x(),y=A(),l=$({username:"",password:"",password_repeat:"",email:"",code:""}),h={username:[{validator:(r,t,o)=>{t===""?o(new Error("请输人用户名")):/[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(t)?o():o(new Error("用户名不能包含特殊字符，只能是中/英文"))},trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码的长度必须在 6-20 个字符之间",trigger:["blur","change"]}],password_repeat:[{validator:(r,t,o)=>{t===""?o(new Error("请再次输入密码")):t!==l.password?o(new Error("两次输入的密码不一致")):o()},trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"请输人合法的电子邮件地址",trigger:["blur","change"]}],code:[{required:!0,message:"请输入获取的验证码",trigger:"blur"}]};function E(){g?(n.value=60,X(l.email,"register").then(r=>{if(r.code===200){i.success(`验证码已发送到邮箱：${l.email}，请注意查收`);const t=setInterval(()=>{n.value===0?clearInterval(t):n.value--},1e3)}else i.warning(r.msg),n.value=0})):i.warning("请输人正确的电子邮件")}const g=k(()=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l.email));function V(){f.value.validate(r=>{r?R(l).then(t=>{t.code===200?(i.success("注册成功，欢迎加入我们"),y.push("/login")):i.warning(t.msg)}):i.warning("请完整填写注册表单内容")})}return(r,t)=>{const o=q,p=N,u=S,c=D,w=F,b=P,C=W,z=M;return I(),B("div",Y,[G,d("div",H,[e(C,{model:l,rules:h,ref_key:"formRef",ref:f},{default:a(()=>[e(u,{prop:"username"},{default:a(()=>[e(p,{modelValue:l.username,"onUpdate:modelValue":t[0]||(t[0]=s=>l.username=s),maxlength:"10",type:"text",placeholder:"用户名"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(T))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:a(()=>[e(p,{modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=s=>l.password=s),maxlength:"20",type:"password",placeholder:"密码"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(v))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password_repeat"},{default:a(()=>[e(p,{modelValue:l.password_repeat,"onUpdate:modelValue":t[2]||(t[2]=s=>l.password_repeat=s),maxlength:"20",type:"password",placeholder:"重复密码"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(v))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"email"},{default:a(()=>[e(p,{modelValue:l.email,"onUpdate:modelValue":t[3]||(t[3]=s=>l.email=s),type:"email",placeholder:"电子邮件地址"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(j))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"code"},{default:a(()=>[e(b,{gutter:10,style:{width:"100%"}},{default:a(()=>[e(c,{span:17},{default:a(()=>[e(p,{modelValue:l.code,"onUpdate:modelValue":t[4]||(t[4]=s=>l.code=s),maxlength:"6",placeholder:"请输人验证码"},{prefix:a(()=>[e(o,null,{default:a(()=>[e(m(L))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:5},{default:a(()=>[e(w,{type:"success",onClick:E,disabled:!g.value||n.value!=0},{default:a(()=>[_(Z(n.value>0?`请稍后 ${n.value} 秒`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",J,[e(w,{onClick:V,type:"warning",style:{width:"270px"},plain:""},{default:a(()=>[_("立即注册")]),_:1})]),d("div",K,[O,e(z,{style:{translate:"0 -1px"},onClick:t[5]||(t[5]=s=>r.$router.push("/login"))},{default:a(()=>[_("立即登录")]),_:1})])])}}});export{ne as default};
