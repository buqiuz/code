import{d as X,i as ye,j as b,k as he,o as s,f as H,w as k,a5 as x,e as o,an as me,b as g,a,F,A,u as i,t as y,ap as L,a6 as N,T as fe,a3 as I,a7 as G,bu as Ce,aw as ae,a1 as Y,aj as M,r as ke,h as w,a8 as $e,a9 as Be,l as pe,ao as we}from"./index-35141ee5.js";import{E as re}from"./el-scrollbar-d2c305e3.js";import{c as ge,d as Ie}from"./index-0613b508.js";import{E as ce}from"./el-tag-d18553b0.js";import{E as ue}from"./el-avatar-948f01f8.js";import{M as W}from"./index-ddedae1d.js";/* empty css                */const de={"[嘿嘿]":"😀","[嘻嘻]":"😁","[笑哭了]":"😂","[笑得满地打滚]":"🤣","[笑脸]":"😃","[笑脸和睁眼]":"😄","[尴尬的笑]":"😅","[坏笑]":"😆","[眨眼笑]":"😉","[微笑]":"😊","[舌头]":"😋","[墨镜]":"😎","[色迷迷的笑]":"😍","[飞吻]":"😘","[亲吻]":"😗","[微笑亲亲]":"😙","[闭眼亲吻]":"😚","[标准]":"🙂","[拥抱]":"🤗","[星星眼]":"🤩","[思考]":"🤔","[皱眉]":"🤨","[表情中立的]":"😐","[无语]":"😑","[无表情的]":"😶","[翻白眼]":"🙄","[得意]":"😏","[困惑]":"😣","[忧伤]":"😥","[吃惊]":"😮","[闭嘴]":"🤐","[震惊]":"😯","[困倦]":"😪","[累]":"😫","[睡觉]":"😴","[安心]":"😌","[吐舌]":"😛","[眨眼吐舌]":"😜","[闭眼吐舌]":"😝","[流口水]":"🤤","[不高兴]":"😒","[冷汗]":"😓","[沮丧]":"😔","[困扰]":"😕","[倒转]":"🙃","[贪婪]":"🤑","[大惊小怪]":"😲","[不满]":"☹","[悲伤]":"🙁","[痛苦]":"😖","[失望]":"😞","[担心]":"😟","[傲慢]":"😤","[伤心]":"😢","[哭]":"😭","[啊]":"😦","[焦虑]":"😧","[害怕]":"😨","[紧张]":"😩","[脑袋爆炸]":"🤯","[龇牙]":"😬","[恐惧]":"😰","[尖叫]":"😱","[尴尬]":"😳","[疯狂]":"🤪","[晕倒]":"😵","[愤怒]":"😡","[生气]":"😠","[咒骂]":"🤬","[口罩]":"😷","[生病]":"🤒","[受伤]":"🤕","[恶心]":"🤢","[呕吐]":"🤮","[打喷嚏]":"🤧","[天使]":"😇","[牛仔帽]":"🤠","[小丑]":"🤡","[撒谎]":"🤥","[安静]":"🤫","[偷笑]":"🤭","[凝视]":"🧐","[书呆子]":"🤓","[恶魔]":"😈","[生气恶魔]":"👿","[大耳朵恶魔]":"👹","[长鼻恶魔]":"👺","[骷髅]":"💀","[鬼魂]":"👻","[外星人]":"👽","[外星怪物]":"👾","[机器人]":"🤖","[大便]":"💩","[笑猫]":"😺","[眯眼笑猫]":"😸","[笑哭猫]":"😹","[爱心猫]":"😻","[坏笑猫]":"😼","[亲亲猫]":"😽","[惊恐猫]":"🙀","[伤心猫]":"😿","[气愤猫]":"😾","[捂眼猴子]":"🙈","[捂耳猴子]":"🙉","[捂嘴猴子]":"🙊"},J={"[3d眼镜]":"http://8.137.91.234:9000/blog/emoji/heo/3d眼镜.png","[beluga]":"http://8.137.91.234:9000/blog/emoji/heo/beluga.png","[EDG]":"http://8.137.91.234:9000/blog/emoji/heo/EDG.png","[LPL]":"http://8.137.91.234:9000/blog/emoji/heo/LPL.png","[不好意思]":"http://8.137.91.234:9000/blog/emoji/heo/不好意思.png","[不服吗]":"http://8.137.91.234:9000/blog/emoji/heo/不服吗.png","[亲亲]":"http://8.137.91.234:9000/blog/emoji/heo/亲亲.png","[伞兵]":"http://8.137.91.234:9000/blog/emoji/heo/伞兵.png","[倚墙笑]":"http://8.137.91.234:9000/blog/emoji/heo/倚墙笑.png","[值得肯定]":"http://8.137.91.234:9000/blog/emoji/heo/值得肯定.png","[偷偷看]":"http://8.137.91.234:9000/blog/emoji/heo/偷偷看.png","[傻笑]":"http://8.137.91.234:9000/blog/emoji/heo/傻笑.png","[再见]":"http://8.137.91.234:9000/blog/emoji/heo/再见.png","[出家人]":"http://8.137.91.234:9000/blog/emoji/heo/出家人.png","[击剑]":"http://8.137.91.234:9000/blog/emoji/heo/击剑.png","[加班]":"http://8.137.91.234:9000/blog/emoji/heo/加班.png","[勉强笑]":"http://8.137.91.234:9000/blog/emoji/heo/勉强笑.png","[危险]":"http://8.137.91.234:9000/blog/emoji/heo/危险.png","[发红包]":"http://8.137.91.234:9000/blog/emoji/heo/发红包.png","[吃手]":"http://8.137.91.234:9000/blog/emoji/heo/吃手.png","[吃瓜]":"http://8.137.91.234:9000/blog/emoji/heo/吃瓜.png","[吐血]":"http://8.137.91.234:9000/blog/emoji/heo/吐血.png","[吵架]":"http://8.137.91.234:9000/blog/emoji/heo/吵架.png","[呦吼]":"http://8.137.91.234:9000/blog/emoji/heo/呦吼.png","[呲牙笑]":"http://8.137.91.234:9000/blog/emoji/heo/呲牙笑.png","[哈士奇]":"http://8.137.91.234:9000/blog/emoji/heo/哈士奇.png","[哈士奇失去意识]":"http://8.137.91.234:9000/blog/emoji/heo/哈士奇失去意识.png","[哈士奇失望]":"http://8.137.91.234:9000/blog/emoji/heo/哈士奇失望.png","[哭泣]":"http://8.137.91.234:9000/blog/emoji/heo/哭泣.png","[唱歌]":"http://8.137.91.234:9000/blog/emoji/heo/唱歌.png","[喜欢]":"http://8.137.91.234:9000/blog/emoji/heo/喜欢.png","[嘿哈]":"http://8.137.91.234:9000/blog/emoji/heo/嘿哈.png","[大笑]":"http://8.137.91.234:9000/blog/emoji/heo/大笑.png","[失去信号]":"http://8.137.91.234:9000/blog/emoji/heo/失去信号.png","[失望]":"http://8.137.91.234:9000/blog/emoji/heo/失望.png","[头秃]":"http://8.137.91.234:9000/blog/emoji/heo/头秃.png","[奋斗]":"http://8.137.91.234:9000/blog/emoji/heo/奋斗.png","[好奇]":"http://8.137.91.234:9000/blog/emoji/heo/好奇.png","[好的]":"http://8.137.91.234:9000/blog/emoji/heo/好的.png","[害羞]":"http://8.137.91.234:9000/blog/emoji/heo/害羞.png","[小丑]":"http://8.137.91.234:9000/blog/emoji/heo/小丑.png","[小偷]":"http://8.137.91.234:9000/blog/emoji/heo/小偷.png","[尬笑]":"http://8.137.91.234:9000/blog/emoji/heo/尬笑.png","[尴尬]":"http://8.137.91.234:9000/blog/emoji/heo/尴尬.png","[应援]":"http://8.137.91.234:9000/blog/emoji/heo/应援.png","[开心]":"http://8.137.91.234:9000/blog/emoji/heo/开心.png","[引起不适]":"http://8.137.91.234:9000/blog/emoji/heo/引起不适.png","[微笑]":"http://8.137.91.234:9000/blog/emoji/heo/微笑.png","[思考]":"http://8.137.91.234:9000/blog/emoji/heo/思考.png","[恶心]":"http://8.137.91.234:9000/blog/emoji/heo/恶心.png","[恶魔]":"http://8.137.91.234:9000/blog/emoji/heo/恶魔.png","[恶魔恐惧]":"http://8.137.91.234:9000/blog/emoji/heo/恶魔恐惧.png","[惊吓]":"http://8.137.91.234:9000/blog/emoji/heo/惊吓.png","[惊吓白眼]":"http://8.137.91.234:9000/blog/emoji/heo/惊吓白眼.png","[惊讶]":"http://8.137.91.234:9000/blog/emoji/heo/惊讶.png","[惬意]":"http://8.137.91.234:9000/blog/emoji/heo/惬意.png","[感动]":"http://8.137.91.234:9000/blog/emoji/heo/感动.png","[愤怒]":"http://8.137.91.234:9000/blog/emoji/heo/愤怒.png","[我看好你]":"http://8.137.91.234:9000/blog/emoji/heo/我看好你.png","[手机相机]":"http://8.137.91.234:9000/blog/emoji/heo/手机相机.png","[打咩]":"http://8.137.91.234:9000/blog/emoji/heo/打咩.png","[打牌]":"http://8.137.91.234:9000/blog/emoji/heo/打牌.png","[托腮]":"http://8.137.91.234:9000/blog/emoji/heo/托腮.png","[扶额]":"http://8.137.91.234:9000/blog/emoji/heo/扶额.png","[抠鼻]":"http://8.137.91.234:9000/blog/emoji/heo/抠鼻.png","[抬眼镜]":"http://8.137.91.234:9000/blog/emoji/heo/抬眼镜.png","[拜托]":"http://8.137.91.234:9000/blog/emoji/heo/拜托.png","[捂嘴笑]":"http://8.137.91.234:9000/blog/emoji/heo/捂嘴笑.png","[捂脸]":"http://8.137.91.234:9000/blog/emoji/heo/捂脸.png","[擦汗]":"http://8.137.91.234:9000/blog/emoji/heo/擦汗.png","[放鞭炮]":"http://8.137.91.234:9000/blog/emoji/heo/放鞭炮.png","[敬礼]":"http://8.137.91.234:9000/blog/emoji/heo/敬礼.png","[整理发型]":"http://8.137.91.234:9000/blog/emoji/heo/整理发型.png","[斗鸡眼]":"http://8.137.91.234:9000/blog/emoji/heo/斗鸡眼.png","[智慧的眼神]":"http://8.137.91.234:9000/blog/emoji/heo/智慧的眼神.png","[月饼]":"http://8.137.91.234:9000/blog/emoji/heo/月饼.png","[有没有搞错]":"http://8.137.91.234:9000/blog/emoji/heo/有没有搞错.png","[正确]":"http://8.137.91.234:9000/blog/emoji/heo/正确.png","[没招]":"http://8.137.91.234:9000/blog/emoji/heo/没招.png","[波吉]":"http://8.137.91.234:9000/blog/emoji/heo/波吉.png","[泪奔]":"http://8.137.91.234:9000/blog/emoji/heo/泪奔.png","[流汗微笑]":"http://8.137.91.234:9000/blog/emoji/heo/流汗微笑.png","[流鼻涕]":"http://8.137.91.234:9000/blog/emoji/heo/流鼻涕.png","[深思]":"http://8.137.91.234:9000/blog/emoji/heo/深思.png","[滑稽]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽.png","[滑稽吃瓜]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽吃瓜.png","[滑稽喝水]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽喝水.png","[滑稽奶茶]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽奶茶.png","[滑稽柠檬]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽柠檬.png","[滑稽狂汗]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽狂汗.png","[滑稽被子]":"http://8.137.91.234:9000/blog/emoji/heo/滑稽被子.png","[烦恼]":"http://8.137.91.234:9000/blog/emoji/heo/烦恼.png","[熊熊]":"http://8.137.91.234:9000/blog/emoji/heo/熊熊.png","[熊猫]":"http://8.137.91.234:9000/blog/emoji/heo/熊猫.png","[熊猫唱歌]":"http://8.137.91.234:9000/blog/emoji/heo/熊猫唱歌.png","[熊猫喜欢]":"http://8.137.91.234:9000/blog/emoji/heo/熊猫喜欢.png","[熊猫失望]":"http://8.137.91.234:9000/blog/emoji/heo/熊猫失望.png","[熊猫意外]":"http://8.137.91.234:9000/blog/emoji/heo/熊猫意外.png","[熬夜]":"http://8.137.91.234:9000/blog/emoji/heo/熬夜.png","[爆炸]":"http://8.137.91.234:9000/blog/emoji/heo/爆炸.png","[牛年进宝]":"http://8.137.91.234:9000/blog/emoji/heo/牛年进宝.png","[狂热]":"http://8.137.91.234:9000/blog/emoji/heo/狂热.png","[狗头]":"http://8.137.91.234:9000/blog/emoji/heo/狗头.png","[狗头围脖]":"http://8.137.91.234:9000/blog/emoji/heo/狗头围脖.png","[狗头失望]":"http://8.137.91.234:9000/blog/emoji/heo/狗头失望.png","[狗头意外]":"http://8.137.91.234:9000/blog/emoji/heo/狗头意外.png","[狗头胖次]":"http://8.137.91.234:9000/blog/emoji/heo/狗头胖次.png","[狗头花]":"http://8.137.91.234:9000/blog/emoji/heo/狗头花.png","[狗头草]":"http://8.137.91.234:9000/blog/emoji/heo/狗头草.png","[猪头]":"http://8.137.91.234:9000/blog/emoji/heo/猪头.png","[猪头意外]":"http://8.137.91.234:9000/blog/emoji/heo/猪头意外.png","[生病]":"http://8.137.91.234:9000/blog/emoji/heo/生病.png","[电话]":"http://8.137.91.234:9000/blog/emoji/heo/电话.png","[疑问]":"http://8.137.91.234:9000/blog/emoji/heo/疑问.png","[疼痛]":"http://8.137.91.234:9000/blog/emoji/heo/疼痛.png","[痛哭]":"http://8.137.91.234:9000/blog/emoji/heo/痛哭.png","[看穿一切]":"http://8.137.91.234:9000/blog/emoji/heo/看穿一切.png","[眩晕]":"http://8.137.91.234:9000/blog/emoji/heo/眩晕.png","[睡觉]":"http://8.137.91.234:9000/blog/emoji/heo/睡觉.png","[禁言]":"http://8.137.91.234:9000/blog/emoji/heo/禁言.png","[笑哭]":"http://8.137.91.234:9000/blog/emoji/heo/笑哭.png","[纠结]":"http://8.137.91.234:9000/blog/emoji/heo/纠结.png","[绿帽]":"http://8.137.91.234:9000/blog/emoji/heo/绿帽.png","[缺牙笑]":"http://8.137.91.234:9000/blog/emoji/heo/缺牙笑.png","[翻白眼]":"http://8.137.91.234:9000/blog/emoji/heo/翻白眼.png","[老虎意外]":"http://8.137.91.234:9000/blog/emoji/heo/老虎意外.png","[耍酷]":"http://8.137.91.234:9000/blog/emoji/heo/耍酷.png","[胡子]":"http://8.137.91.234:9000/blog/emoji/heo/胡子.png","[菜狗]":"http://8.137.91.234:9000/blog/emoji/heo/菜狗.png","[菜狗花]":"http://8.137.91.234:9000/blog/emoji/heo/菜狗花.png","[蒙面滑稽]":"http://8.137.91.234:9000/blog/emoji/heo/蒙面滑稽.png","[虎年进宝]":"http://8.137.91.234:9000/blog/emoji/heo/虎年进宝.png","[被打]":"http://8.137.91.234:9000/blog/emoji/heo/被打.png","[裂开]":"http://8.137.91.234:9000/blog/emoji/heo/裂开.png","[警告]":"http://8.137.91.234:9000/blog/emoji/heo/警告.png","[读书]":"http://8.137.91.234:9000/blog/emoji/heo/读书.png","[财神红包]":"http://8.137.91.234:9000/blog/emoji/heo/财神红包.png","[超爱]":"http://8.137.91.234:9000/blog/emoji/heo/超爱.png","[这是啥]":"http://8.137.91.234:9000/blog/emoji/heo/这是啥.png","[送福]":"http://8.137.91.234:9000/blog/emoji/heo/送福.png","[送花]":"http://8.137.91.234:9000/blog/emoji/heo/送花.png","[错误]":"http://8.137.91.234:9000/blog/emoji/heo/错误.png","[阴险]":"http://8.137.91.234:9000/blog/emoji/heo/阴险.png","[难以置信]":"http://8.137.91.234:9000/blog/emoji/heo/难以置信.png","[面具]":"http://8.137.91.234:9000/blog/emoji/heo/面具.png","[饥渴]":"http://8.137.91.234:9000/blog/emoji/heo/饥渴.png","[鬼脸]":"http://8.137.91.234:9000/blog/emoji/heo/鬼脸.png","[黑线]":"http://8.137.91.234:9000/blog/emoji/heo/黑线.png","[鼓掌]":"http://8.137.91.234:9000/blog/emoji/heo/鼓掌.png"},xe={class:"reply"},Ee=["placeholder"],ze={class:"emojis_container"},Le={class:"OvO_emojis"},Se=["onClick","title"],Te={class:"OvO_heo"},qe=["onClick","title","src"],Oe=["onClick"],Ne=X({__name:"ReplyBox",props:{comment:{type:Object,required:!0},getComments:{type:Function,required:!0},pageSize:{type:Number,required:!0},type:Number},setup(e){const r=ye(),d=e,U=b(["Emoji","Heo"]),v=b(),$=b(0),V=b(),p=b();he(()=>{v.value.children[$.value].style.backgroundColor="#7B5F69",v.value.children[$.value].style.color="white",p.value.addEventListener("focus",function(){p.value.classList.add("active")}),p.value.addEventListener("blur",function(){(d.comment.replyText===""||d.comment.replyText===void 0)&&p.value.classList.remove("active")})});function f(c){$.value=c;for(let j=0;j<v.value.children.length;j++)v.value.children[j].style.backgroundColor="white",v.value.children[j].style.color="#4A4A4A";v.value.children[c].style.backgroundColor="#7B5F69",v.value.children[c].style.color="white"}function m(){p.value.focus()}function R(c,j){if(p.value.selectionStart||p.value.selectionStart===0){const _=p.value.selectionStart,E=p.value.selectionEnd,P=p.value.scrollTop;p.value.value=p.value.value.substring(0,_)+c+p.value.value.substring(E,p.value.value.length),P>0&&(p.value.scrollTop=P),p.value.focus(),p.value.selectionStart=_+c.length,p.value.selectionEnd=_+c.length}else p.value.value+=c,p.value.focus();j.replyText=p.value.value}function S(c){if(c.replyText===""||c.replyText===void 0){I.warning("评论内容不能为空");return}const j={type:d.type,typeId:c.typeId,commentContent:c.replyText,parentId:c.parentId==null?c.id:c.parentId,replyId:c.id,replyUserId:c.commentUserId};ge(j).then(_=>{_.code===200?(I.success("评论成功"),c.replyText="",d.getComments(r.params.id,"1",d.pageSize)):_.code===1002?I.error(_.msg):I.error("出现问题，请联系管理员")})}return(c,j)=>{const _=G,E=re,P=Ce,Q=ae;return s(),H(fe,{name:"el-zoom-in-top"},{default:k(()=>[x(o("div",xe,[x(o("textarea",{ref_key:"myInput",ref:p,"onUpdate:modelValue":j[0]||(j[0]=B=>e.comment.replyText=B),placeholder:"@"+e.comment.commentUserNickname},null,8,Ee),[[me,e.comment.replyText]]),o("div",null,[o("div",{ref_key:"emojiBtn",ref:V},[g(P,{placement:"bottom-end",width:510,trigger:"click",onBeforeEnter:m},{reference:k(()=>[g(_,{name:"emojis",width:"1.5em",height:"1.5em",style:{"margin-right":"0.8rem",cursor:"pointer"}})]),default:k(()=>[o("div",ze,[g(E,null,{default:k(()=>[x(o("div",Le,[(s(!0),a(F,null,A(i(de),(B,z)=>(s(),a("div",{onClick:K=>R(B,e.comment),key:z,title:z},y(B),9,Se))),128))],512),[[L,i($)===0]]),x(o("div",Te,[o("div",null,[(s(!0),a(F,null,A(i(J),(B,z)=>(s(),a("img",{onClick:K=>R(z,e.comment),key:z,title:z,src:B},null,8,qe))),128))])],512),[[L,i($)===1]]),o("div",{class:"OvO_options",ref_key:"options",ref:v},[(s(!0),a(F,null,A(i(U),(B,z)=>(s(),a("div",{class:"item_emoji",onClick:K=>f(z)},y(B),9,Oe))),256))],512)]),_:1})])]),_:1})],512),g(Q,{type:"danger",plain:"",size:"small",onClick:j[1]||(j[1]=B=>S(e.comment))},{default:k(()=>[N("发布")]),_:1})])],512),[[L,e.comment.showReplyBox]])]),_:1})}}});const be=Y(Ne,[["__scopeId","data-v-9c51b322"]]),Fe=(e,r)=>M.request({url:"/like/auth/like",method:"post",params:{type:e,typeId:r}}),Ae=(e,r)=>M.request({url:"/like/auth/like",method:"delete",params:{type:e,typeId:r}}),Re=(e,r)=>M.request({url:"/like/whether/like",method:"get",params:{type:e,typeId:r}}),Ue=e=>($e("data-v-66f150c4"),e=e(),Be(),e),Ve={key:0},Pe={class:"comment_content"},De={class:"comment_content_header"},Me={key:0},He={style:{"font-size":"0.8em",color:"grey"}},Ge={style:{"font-size":"0.8em",color:"grey"}},Ke={class:"comment_content_body"},Je={style:{margin:"0.5rem 0"}},Qe=Ue(()=>o("span",{style:{"font-weight":"bold"}},"回复",-1)),We={class:"replyUserNickname"},Xe={key:0},Ye=X({__name:"ChildComment",props:{comment:{type:Object,required:!0},authorId:{type:Number,required:!0},showAllChildComments:{type:Boolean,required:!1},likeBtn:{type:Function,required:!0},cancelLikeBtn:{type:Function,required:!0},replyBtn:{type:Function,required:!0},getComments:{type:Function,required:!0},pageSize:{type:Number,required:!0},type:Number},setup(e){return(r,d)=>{const U=ue,v=ce,$=G,V=G,p=be,f=ke("ChildComment",!0);return s(!0),a(F,null,A(e.comment.childComment,(m,R)=>(s(),a("div",null,[R<1||e.showAllChildComments?(s(),a("div",Ve,[(s(),a("div",{class:"parent_container",key:m.id},[g(U,{shape:"square",size:40,src:m.commentUserAvatar},null,8,["src"]),o("div",Pe,[o("div",De,[o("div",null,[o("div",null,y(m.commentUserNickname),1),m.commentUserId===e.authorId?(s(),a("div",Me,[g(v,{size:"small"},{default:k(()=>[N("作者")]),_:1})])):w("",!0),o("div",null,y(m.createTime),1)]),o("div",null,[x(g($,{onClick:S=>e.likeBtn(m),name:"like",style:{cursor:"pointer"}},null,8,["onClick"]),[[L,!m.isLike]]),x(g($,{onClick:S=>e.cancelLikeBtn(m),name:"like-selected",style:{cursor:"pointer"}},null,8,["onClick"]),[[L,m.isLike]]),o("span",He,y(m.likeCount),1),g(V,{onClick:S=>e.replyBtn(e.comment.childComment,m.id),name:"comment",style:{margin:"0 0.2em 0 0.5rem",cursor:"pointer"}},null,8,["onClick"]),o("span",Ge,y(m.childCommentCount),1)])]),o("div",Ke,[o("div",Je,[Qe,o("span",We," @"+y(m.replyUserNickname),1),N("： ")]),o("div",null,[g(i(W),{modelValue:m.commentContent},null,8,["modelValue"])])]),g(p,{type:e.type,comment:m,"get-comments":e.getComments,"page-size":e.pageSize},null,8,["type","comment","get-comments","page-size"])])])),m.childComment&&m.childComment.length?(s(),a("div",Xe,[g(f,{"reply-btn":e.replyBtn,"like-btn":e.likeBtn,"cancel-like-btn":e.cancelLikeBtn,comment:m,"author-id":e.authorId,"get-comments":e.getComments,"page-size":e.pageSize,type:e.type},null,8,["reply-btn","like-btn","cancel-like-btn","comment","author-id","get-comments","page-size","type"])])):w("",!0)])):w("",!0)]))),256)}}});const Ze=Y(Ye,[["__scopeId","data-v-66f150c4"]]),et={class:"comments"},tt={key:0},ot={class:"comments_title"},nt={class:"form_container"},lt={class:"btn"},it={class:"emojis_container"},st={class:"OvO_emojis"},pt=["title","onClick"],ht={class:"OvO_heo"},mt=["title","src","onClick"],at=["onClick"],rt={key:0,class:"preview"},gt={style:{display:"flex","margin-top":"1rem","border-top":"1px solid var(--el-border-color)","padding-top":"1rem"}},ct={class:"comment_content"},ut={class:"comment_content_header"},dt={key:0},bt={style:{"font-size":"0.8em",color:"grey"}},vt={style:{"font-size":"0.8em",color:"grey"}},jt={class:"comment_content_body"},_t={key:2,style:{display:"flex","justify-content":"center","margin-top":"1rem"}},yt={key:1,class:"more"},ft=X({__name:"index",props:{authorId:{type:Number,required:!0},typeId:{type:Number,required:!0},isShowHeader:{type:Boolean,default:!0},type:Number,likeType:Number},setup(e){const r=e,d=b(""),U=b(""),v=b(),$=b(!1);function V(n){let t=v.value.selectionStart,l=v.value.selectionEnd;d.value=d.value.substring(0,t)+n+d.value.substring(l,d.value.length),S.value=!1,v.value.focus()}const p=b(0),f=b(),m=b(),R=b(0),S=b(!1),c=b(!1),j=b(["Emoji","Heo"]),_=b(!1),E=b(2);he(()=>{f.value!==void 0&&f.value.children.length>0&&(f.value.children[p.value].style.backgroundColor="#7B5F69",f.value.children[p.value].style.color="white"),D(r.typeId,"1",String(E.value))});function P(n){p.value=n;for(let t=0;t<f.value.children.length;t++)f.value.children[t].style.backgroundColor="white",f.value.children[t].style.color="#4A4A4A";f.value.children[n].style.backgroundColor="#7B5F69",f.value.children[n].style.color="white"}pe(()=>d.value,n=>{U.value=B(n)});function Q(n){return B(n)}function B(n){const t=/```[\s\S]*?```/g,l=n.match(t);let u=n;l&&l.forEach((q,O)=>{u=u.replace(q,`{{CODE_BLOCK_${O}}}`)});const T=u.match(/\[[^\]]+\]/g);if(T)for(let q=0;q<T.length;q++){const O=T[q];J[O]&&(u=u.replace(O,`<span><img src="${J[O]}" width="24" height="24" alt="buqiu-blog-[1231256151315612]" /></span>`))}return l&&l.forEach((q,O)=>{u=u.replace(`{{CODE_BLOCK_${O}}}`,q)}),u}function z(n){n.forEach(t=>{t.commentContent=Q(t.commentContent),t.childComment&&t.childComment.length&&z(t.childComment)})}const K=()=>{D(r.typeId,"1",String(E.value+=3))};function Z(n,t){t.data.forEach(l=>{n.forEach(u=>{u.id===l.typeId&&(u.isLike=!0),u.childComment&&u.childComment.length&&Z(u.childComment,t)})})}function ee(n,t){n.forEach(l=>{l.id===t&&(l.showReplyBox=!l.showReplyBox),l.childComment&&l.childComment.length&&te(l.childComment,t)})}function te(n,t){n.forEach(l=>{l.id===t&&(l.showReplyBox=!l.showReplyBox),l.childComment&&l.childComment.length&&te(l.childComment,t)})}pe(()=>r.typeId,n=>{D(n,"1",String(E.value))});function D(n,t,l){Ie(r.type,n,t,l).then(u=>{u.code==200&&($.value=!0,m.value=u.data.page,R.value=u.data.total,z(u.data.page),ve())})}function oe(n){Fe(r.likeType,n.id).then(t=>{t.code===200?(n.isLike=!0,n.likeCount+=1,I.success("点赞成功")):I.error(t.msg)})}function ne(n){Ae(r.likeType,n.id).then(t=>{t.code===200?(n.isLike=!1,n.likeCount-=1,I.info("取消点赞")):I.error(t.msg)})}function ve(){Re(r.likeType).then(n=>{n.code===200&&n.data.forEach(t=>{m.value.forEach(l=>{l.id===t.typeId&&(l.isLike=!0),l.childComment&&l.childComment.length&&Z(l.childComment,n)})})})}function je(){if(d.value===""){I.error("评论内容不能为空");return}let n={type:r.type,typeId:r.typeId,commentContent:d.value};ge(n).then(t=>{t.code===200?(I.success("评论成功"),d.value="",D(r.typeId,"1",String(E.value))):t.code===1002?I.error(t.msg):I.error("出现问题，请联系管理员")})}return(n,t)=>{var ie;const l=G,u=re,T=ae,q=ue,O=ce,le=G,_e=be;return s(),a("div",et,[e.isShowHeader?(s(),a("div",tt,[o("div",ot,[g(l,{name:"comment",width:"1.5em",height:"1.5em"}),o("span",null,"评论("+y(i(R))+")",1)]),o("div",nt,[x(o("textarea",{ref_key:"myInput",ref:v,class:"textarea","onUpdate:modelValue":t[0]||(t[0]=h=>we(d)?d.value=h:null),placeholder:"留下你的精彩评论吧！"},null,512),[[me,i(d)]]),o("div",lt,[o("div",null,[g(l,{onClick:t[1]||(t[1]=h=>S.value=!i(S)),name:"emojis",style:{"margin-right":"0.8rem",cursor:"pointer"}})]),x(o("div",it,[g(u,null,{default:k(()=>[x(o("div",st,[(s(!0),a(F,null,A(i(de),(h,C)=>(s(),a("div",{key:C,title:C,onClick:se=>V(h)},y(h),9,pt))),128))],512),[[L,i(p)==0]]),x(o("div",ht,[o("div",null,[(s(!0),a(F,null,A(i(J),(h,C)=>(s(),a("img",{key:C,title:C,src:h,onClick:se=>V(C)},null,8,mt))),128))])],512),[[L,i(p)==1]])]),_:1}),o("div",{class:"OvO_options",ref_key:"options",ref:f},[(s(!0),a(F,null,A(i(j),(h,C)=>(s(),a("div",{class:"item_emoji",onClick:se=>P(C)},y(h),9,at))),256))],512)],512),[[L,i(S)]]),o("div",null,[g(T,{type:"info",plain:"",size:"small",onClick:t[2]||(t[2]=h=>c.value=!i(c))},{default:k(()=>[N("预览")]),_:1}),g(T,{type:"success",plain:"",size:"small",onClick:je},{default:k(()=>[N("发布")]),_:1})])]),i(c)?(s(),a("div",rt,[g(i(W),{modelValue:i(U)},null,8,["modelValue"])])):w("",!0)])])):w("",!0),o("div",null,[(s(!0),a(F,null,A(i(m),h=>(s(),a("div",gt,[g(q,{shape:"square",size:40,src:h.commentUserAvatar},null,8,["src"]),o("div",ct,[o("div",ut,[o("div",null,[o("div",null,y(h.commentUserNickname),1),h.commentUserId===e.authorId?(s(),a("div",dt,[g(O,{size:"small"},{default:k(()=>[N("作者")]),_:1})])):w("",!0),o("div",null,y(h.createTime),1)]),o("div",null,[x(g(le,{onClick:C=>oe(h),name:"like",style:{cursor:"pointer"}},null,8,["onClick"]),[[L,!h.isLike]]),x(g(le,{onClick:C=>ne(h),name:"like-selected",style:{cursor:"pointer"}},null,8,["onClick"]),[[L,h.isLike]]),o("span",bt,y(h.likeCount),1),g(l,{onClick:C=>ee(i(m),h.id),name:"comment",style:{margin:"0 0.2em 0 0.5rem",cursor:"pointer"}},null,8,["onClick"]),o("span",vt,y(h.childCommentCount),1)])]),o("div",jt,[o("div",null,[g(i(W),{modelValue:h.commentContent},null,8,["modelValue"])])]),i($)?(s(),H(_e,{key:0,type:e.type,comment:h,"get-comments":D,"page-size":i(E)},null,8,["type","comment","page-size"])):w("",!0),h.childComment&&h.childComment.length?(s(),H(Ze,{key:1,"reply-btn":ee,"like-btn":oe,"cancel-like-btn":ne,comment:h,"author-id":e.authorId,"show-all-child-comments":i(_),"get-comments":D,"page-size":i(E),type:e.type},null,8,["comment","author-id","show-all-child-comments","page-size","type"])):w("",!0),h.childCommentCount>=2?(s(),a("div",_t,[i(_)?w("",!0):(s(),H(T,{key:0,type:"info",plain:"",size:"small",onClick:t[3]||(t[3]=C=>_.value=!0)},{default:k(()=>[N(" 查看全部"+y(h.childCommentCount)+"条回复 ",1)]),_:2},1024)),i(_)?(s(),H(T,{key:1,type:"info",plain:"",size:"small",onClick:t[4]||(t[4]=C=>_.value=!1)},{default:k(()=>[N(" 收起回复 ")]),_:1})):w("",!0)])):w("",!0)])]))),256))]),i($)&&((ie=i(m)[0])==null?void 0:ie.parentCommentCount)>=i(E)?(s(),a("div",yt,[g(T,{type:"info",plain:"",size:"small",onClick:K},{default:k(()=>[N("查看更多")]),_:1})])):w("",!0)])}}});const Et=Y(ft,[["__scopeId","data-v-b56d9396"]]),zt=(e,r)=>M.request({url:"/favorite/auth/favorite",method:"post",params:{type:e,typeId:r}}),Lt=(e,r)=>M.request({url:"/favorite/auth/favorite",method:"delete",params:{type:e,typeId:r}}),St=(e,r)=>M.request({url:"/favorite/whether/favorite",method:"get",params:{type:e,typeId:r}});export{Et as _,St as a,zt as b,Ae as c,Lt as d,Re as i,Fe as u};
