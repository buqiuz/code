# 后端学习记录

## 1 Annnotation

使用@interface自定义注解时，自动继承了`java.lang.annotation.Annotation`接口，由编译程序自动完成其他细节。在定义注解时，不能继承其他的注解或接口。`@interface`用来声明一个注解，其中的每一个方法实际上是声明了一个配置参数。方法的名称就是参数的名称，返回值类型就是参数的类型（返回值类型只能是基本类型、`Class`、`String`、`enum`）。可以通过`default`来声明参数的默认值。

### 1.1 meta-annotation

- `@Target`:描述注解的使用范围(即被修饰的注解可以用在什么地方).
- `@Retention`:描述注解保留的时间范围(即：被描述的注解在它所修饰的类中可以被保留到何时).
- `@Documented`:描述在使用 javadoc 工具为类生成帮助文档时是否要保留其注解信息。
- `@Inherited`:使被它修饰的注解具有继承性（如果某个类使用了被`@Inherited`修饰的注解，则其子类将自动具有该注解）。

### 1.2 其他注解

- `@Component`:用于自动发现和注册Spring Bean。通常，`@Component` 用于标记普通的组件类，而特定功能的组件类（如服务、控制器）则会使用更具体的注解（如 `@Service`、`@Mapper`、`@Controller`）。
- `@Bean`:用于定义Spring Bean，通常与`@Component`注解功能相同，但`@Bean`通常用于配置类中，用于定义一个方法返回一个Spring Bean。

    >1.作用对象不同：@Component 注解作用于类，而 @Bean 注解作用于方法、
    >2.@Component 通常是通过路径扫描来自动侦测以及自动装配到 Spring 容器中(我们可以使用 @ComponentScan 注解定义要扫描的路径从中找出标识了需要装配的类自动装配到 Spring 的 bean 容器中)。@Bean 注解通常是我们在标有该注解的方法中定义产生这个 bean，@Bean 告诉了 Spring 这是某个类的实例，当我们需要用它的时候还给我。
    >3.@Bean 注解比 @Component 注解的自定义性更强，而且很多地方我们只能通过 @Bean 注解来注册 bean。比如当我们引用第三方库中的类需要装配到 Spring 容器时，只能通过 @Bean 来实现。

- `@Repository` ：对应持久层即 Dao 层，主要用于数据库相关操作。
- `@Service` ：对应服务层，主要设计一些复杂的逻辑，需要用到 Dao 层。
- `@Controller` ：对应 Spring MVC 控制层，主要用来接受用户请求并调用 Service 层返回数据给前端页面。
- `@Configuration` ：声明该类为一个配置类，可以在此类中声明一个或多个 `@Bean` 方法。

    >1.@Component是一个通用的Spring容器管理的单例bean组件。而@Repository, @Service, @Controller就是针对不同的使用场景所采取的特定功能化的注解组件。
    >2.因此，当你的一个类被@Component所注解，那么就意味着同样可以用@Repository, @Service, @Controller 来替代它，同时这些注解会具备有更多的功能，而且功能各异。
    >3.最后，如果你不知道要在项目的业务层采用@Service还是@Component注解。那么，@Service是一个更好的选择。

- `@RestController`:是`@Controller`和`@ResponseBody`的合并注解，用于创建RESTful Web服务的控制器。

### 1.3 AOP

Spring支持AspectJ的注解式切面编程。

- `@Aspect` 声明一个切面（类上）
- 使用`@After`、`@Before`、`@Around`定义建言（advice），可直接将拦截规则（切点）作为参数。
  - `@After` 在方法执行之后执行（方法上）
  - `@Before` 在方法执行之前执行（方法上）
  - `@Around` 在方法执行之前与之后执行（方法上）
- `@PointCut` 声明切点
在java配置类中使用`@EnableAspectJAutoProxy`注解开启Spring对AspectJ代理的支持（类上）

### 1.4 区别

- 用于将对象存入spring的ioc容器中,同`@controller`、`@Service`、`@Component`、`@Configuration`、`@Repository`等几个注解是一样的，都是负责将对象存入容器当中。
- 只不过方式不同，他们是用在类上面的，然后将当前类通过无参构造函数创建对象然后放入容器，而`@Bean`是用在方法上，将当前方法的返回值对象放到容器当中,可以理解为前者是由spring自动创建对象，而`@Bean`创建对象是交给我们自己来控制。
- 使用`@Bean`修饰的方法，可以放在`@controller`、`@Service`、`@Component`、`@Configuration`、`@Repository`修饰的类当中，这样项目在启动的时候，`@Bean`方法返回的对象也会立马存入容器当中！放在启动类也是可以的哦！光通过`@Bean`是无法将对象放入容器当中的！
- 使用位置: `@Bean`一般出现在方法上面，也可用于自定义注解上。
修饰的方法的位置： 使用`@Bean`修饰的方法，可以放在`@controller`、`@Service`、`@Component`、`@Configuration`、`@Repository`修饰的类当中，这样项目在启动的时候，`@Bean`方法返回的对象也会立马存入容器当中！放在启动类也是可以的哦！光通过`@Bean`是无法将对象放入容器当中的！
- 对象名： 默认注入到容器当中的对象id（有的也叫做名称）是方法名，但是如果需要显式命名，则可以在注解上使用 name 属性（或其别名{value}）。比如：`@Bean`(name = "名称")或者`@Bean`("名称")，当然也可以有多个名称`@Bean`(name = { "dataSource1", "dataSource2", "dataSource3" })
- 所属： `@Bean`属于spring当中的注解，在spring-context包下，而并非springboot！
- `@controller`、`@Service`、`@Configuration`、`@Repository`这四个注解其实都是`@Component`派生注解，点开源码就会发现，全是使用的`@Component`注解自定义的。其实spring整这几个注解就是为了方便我们分层，controller层用`@controller`，service用`@Service`，仅此而已！

Reference：
[@Bean注解详解](https://blog.csdn.net/weixin_43888891/article/details/127416437)
[面试必问｜Spring @bean 和 @component 注解有什么区别？](https://developer.aliyun.com/article/839564)
[Java开发者必须掌握的20个Spring 常用注解](https://cloud.tencent.com/developer/article/1954074)
